
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>t_introduction.m</title><meta name="generator" content="MATLAB 8.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2015-06-29"><meta name="DC.source" content="t_introduction.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>t_introduction.m</h1><!--introduction--><p>This script is a brief introduction to key ideas and methods used in ISETBIO.</p><p>To browse through scripts and tutorials use the tab-completion function. For example,    Use t_"TAB KEY" to see the list of tutorials</p><pre>  Use s_"TAB KEY" to see the list of ISET scripts
  Use s_scene"TAB KEY" to see the scripts related to scenes
    and so forth</pre><p>See also: t_sceneIntroduction.m and t_oiIntroduction.m</p><p>To learn more about the processing for a particular function, type help or doc followed by the function name, as in "help sensorCreate" or use "doc sceneCreate"</p><p>Copyright ImagEval Consultants, LLC, 2010.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Initialize ISET</a></li><li><a href="#2">Initialize some parameters</a></li><li><a href="#3">Scene</a></li><li><a href="#7">Optics</a></li><li><a href="#8">Sensor</a></li><li><a href="#9">END</a></li></ul></div><h2>Initialize ISET<a name="1"></a></h2><pre class="codeinput">ieInit
</pre><h2>Initialize some parameters<a name="2"></a></h2><pre class="codeinput"><span class="comment">% In this example, wavelengths range between 400 and 710 nm, sampled every</span>
<span class="comment">% 5 nm. It is also possible to expand the range to include wavelengths in</span>
<span class="comment">% the near infrared (NIR) range. Of course, this would only make sense if your</span>
<span class="comment">% imaging sensor has sensitivity in the NIR range.</span>
wave = 400:5:710;
</pre><h2>Scene<a name="3"></a></h2><p>Create a radiometric description of the scene. There are several ways to create a scene. see scripts/scenes for more information about scenes</p><p>One is to use the sceneCreate function. In the example below, we create a scene of the Macbeth Color Checker illuminated with a tungsten light For a complete list of the types of synthetic scenes type "help sceneCreate"</p><p>A second method for creating a scene is to read data from a file. ISET includes a few multispectral scenes as part of the distribution. These can be found in the data/image/multispectral directory You can also select the file (or many other files) using the command:    fullFileName = vcSelectImage;</p><p>See also: s_sceneFromMultispectral.m, s_sceneFromRGB.m</p><pre class="codeinput">patchSize = 64;
scene = sceneCreate(<span class="string">'macbeth tungsten'</span>,patchSize,wave);

<span class="comment">% It is often useful to visualize the data in the scene window</span>
vcAddObject(scene); sceneWindow;
</pre><img vspace="5" hspace="5" src="t_introduction_01.png" alt=""> <p>Each scene has a stored illuminant.</p><pre class="codeinput">scenePlot(scene,<span class="string">'illuminant energy roi'</span>);
</pre><img vspace="5" hspace="5" src="t_introduction_02.png" alt=""> <img vspace="5" hspace="5" src="t_introduction_03.png" alt=""> <p>It is possible to change the scene illuminant</p><pre class="codeinput">scene = sceneAdjustIlluminant(scene,<span class="string">'D65.mat'</span>);
scene = sceneSet(scene,<span class="string">'name'</span>,<span class="string">'D65'</span>); <span class="comment">% Set the scene name</span>
vcAddObject(scene); sceneWindow;
</pre><img vspace="5" hspace="5" src="t_introduction_04.png" alt=""> <p>Once the scene is loaded, you can adjust different properties using the sceneSet command.  Here we adjust the scene mean luminance and field of view.</p><pre class="codeinput">scenePlot(scene,<span class="string">'illuminant energy roi'</span>);
scene = sceneAdjustLuminance(scene,200);  <span class="comment">% Candelas/m2</span>
scene = sceneSet(scene,<span class="string">'fov'</span>,26.5);       <span class="comment">% Set the scene horizontal field of view</span>
scene = sceneInterpolateW(scene,wave,1);  <span class="comment">% Resample, preserve luminance</span>
<span class="comment">% vcAddObject(scene); sceneWindow; % if you want to view the change in the GUI window</span>
</pre><img vspace="5" hspace="5" src="t_introduction_05.png" alt=""> <h2>Optics<a name="7"></a></h2><p>see t_oiIntroduction.m</p><p>The next step in the system simulation is to specify the optical image formation process.  The optical image is an important structure, like the scene structure.  We adjust the properties of optical image formation using the oiSet and oiGet routines.</p><p>ISET has several optics models that you can experiment with. These include shift-invariant optics, in which there is a different shift-invariant pointspread function for each wavelength, and a ray-trace method, in which we read in data from Zemax and create a shift-variant set of pointspread functions along with a geometric distortion function.</p><p>The simplest is method of creating an optical image is to use the diffraction-limited lens model.  To create a diffraction-limited optics with an f# of 4, you can call these functions</p><pre class="codeinput">oi = oiCreate;
optics = oiGet(oi,<span class="string">'optics'</span>);
optics = opticsSet(optics,<span class="string">'fnumber'</span>,4);

<span class="comment">% In this example we set the properties of the optics to include cos4th</span>
<span class="comment">% falloff for the off axis vignetting of the imaging lens, and we set the</span>
<span class="comment">% lens focal length to 3 mm.</span>
optics = opticsSet(optics,<span class="string">'offaxis'</span>,<span class="string">'cos4th'</span>);
optics = opticsSet(optics,<span class="string">'focal length'</span>,3e-3);     <span class="comment">% from lens calibration software</span>

<span class="comment">% Many other properties can be set as well (type help opticsSet or doc</span>
<span class="comment">% opticsSet).</span>

<span class="comment">% We then replace the new optics variable into the optical image structure.</span>
oi = oiSet(oi,<span class="string">'optics'</span>,optics);

<span class="comment">% We use the scene structure and the optical image structure to update the</span>
<span class="comment">% irradiance.</span>
oi = oiCompute(scene,oi);

<span class="comment">% We save the optical image structure and bring up the optical image</span>
<span class="comment">% window.</span>
vcAddObject(oi); oiWindow;

<span class="comment">% From the window you can see a wide range of options. These include</span>
<span class="comment">% insertion of a birefringent anti-aliasing filter, turning off cos4th</span>
<span class="comment">% image fall-off, adjusting the lens properties, and so forth.</span>
<span class="comment">%</span>
<span class="comment">% You can read more about the optics models by typing "doc opticsGet".</span>
<span class="comment">% You can see an online video about using the ray trace software at:</span>
<span class="comment">%   http://www.imageval.com/public/Products/ISET/ApplicationNotes/ZemaxTutorial.htm</span>
</pre><img vspace="5" hspace="5" src="t_introduction_06.png" alt=""> <h2>Sensor<a name="8"></a></h2><p>The irradiance is then captured by a simulated sensor, resulting in an array of output voltages. There are a very large number of sensor parameters. Here we illustrate the process of creating a simple Bayer-gbrg sensor and setting a few of its basic properties.</p><p>To create the sensor structure, we call</p><pre class="codeinput">sensor = sensorCreate(<span class="string">'bayer (gbrg)'</span>);

<span class="comment">% We set the sensor properties using sensorSet and sensorGet routines.</span>
<span class="comment">%</span>
<span class="comment">% Just as the optical irradiance gives a special status to the optics, the</span>
<span class="comment">% sensor gives a special status to the pixel.  In this section we define</span>
<span class="comment">% the key pixel and sensor properties, and we then put the sensor and pixel</span>
<span class="comment">% back together.</span>

<span class="comment">% To get the pixel structure from the sensor we use:</span>
pixel =  sensorGet(sensor,<span class="string">'pixel'</span>);

<span class="comment">% Here are some of the key pixel properties</span>
voltageSwing   = 1.15;  <span class="comment">% Volts</span>
wellCapacity   = 9000;  <span class="comment">% Electrons</span>
conversiongain = voltageSwing/wellCapacity;
fillfactor     = 0.45;       <span class="comment">% A fraction of the pixel area</span>
pixelSize      = 2.2*1e-6;   <span class="comment">% Meters</span>
darkvoltage    = 1e-005;     <span class="comment">% Volts/sec</span>
readnoise      = 0.00096;    <span class="comment">% Volts</span>

<span class="comment">% We set these properties here</span>
pixel = pixelSet(pixel,<span class="string">'size same fill factor'</span>,[pixelSize pixelSize]);
pixel = pixelSet(pixel,<span class="string">'conversion gain'</span>, conversiongain);
pixel = pixelSet(pixel,<span class="string">'voltage swing'</span>,voltageSwing);
pixel = pixelSet(pixel,<span class="string">'dark voltage'</span>,darkvoltage) ;
pixel = pixelSet(pixel,<span class="string">'read noise volts'</span>,readnoise);

<span class="comment">%  Now we set some general sensor properties</span>
<span class="comment">% exposureDuration = 0.030; % commented because we set autoexposure</span>
dsnu =  0.0010;           <span class="comment">% Volts (dark signal non-uniformity)</span>
prnu = 0.2218;            <span class="comment">% Percent (ranging between 0 and 100) photodetector response non-uniformity</span>
analogGain   = 1;         <span class="comment">% Used to adjust ISO speed</span>
analogOffset = 0;         <span class="comment">% Used to account for sensor black level</span>
rows = 466;               <span class="comment">% number of pixels in a row</span>
cols = 642;               <span class="comment">% number of pixels in a column</span>

<span class="comment">% Set these sensor properties</span>
<span class="comment">% sensor = sensorSet(sensor,'exposuretime',exposureDuration); % commented because we set autoexposure</span>
sensorSet(sensor,<span class="string">'autoExposure'</span>,1);
sensor = sensorSet(sensor,<span class="string">'rows'</span>,rows);
sensor = sensorSet(sensor,<span class="string">'cols'</span>,cols);
sensor = sensorSet(sensor,<span class="string">'dsnu level'</span>,dsnu);
sensor = sensorSet(sensor,<span class="string">'prnu level'</span>,prnu);
sensor = sensorSet(sensor,<span class="string">'analog Gain'</span>,analogGain);
sensor = sensorSet(sensor,<span class="string">'analog Offset'</span>,analogOffset);

<span class="comment">% Stuff the pixel back into the sensor structure</span>
sensor = sensorSet(sensor,<span class="string">'pixel'</span>,pixel);
sensor = pixelCenterFillPD(sensor,fillfactor);

<span class="comment">% It is also possible to replace the spectral quantum efficiency curves of</span>
<span class="comment">% the sensor with those from a calibrated camera.  We include the</span>
<span class="comment">% calibration data from a very nice Nikon D100 camera as part of ISET.</span>
<span class="comment">% To load those data we first determine the wavelength samples for this sensor.</span>
wave = sensorGet(sensor,<span class="string">'wave'</span>);

<span class="comment">% Then we load the calibration data and attach them to the sensor structure</span>
fullFileName = fullfile(isetRootPath,<span class="string">'data'</span>,<span class="string">'sensor'</span>,<span class="string">'colorfilters'</span>,<span class="string">'NikonD100.mat'</span>);
[data,filterNames] = ieReadColorFilter(wave,fullFileName);
sensor = sensorSet(sensor,<span class="string">'filter spectra'</span>,data);
sensor = sensorSet(sensor,<span class="string">'filter names'</span>,filterNames);
sensor = sensorSet(sensor,<span class="string">'Name'</span>,<span class="string">'Camera-Simulation'</span>);

<span class="comment">% We are now ready to compute the sensor image</span>
sensor = sensorCompute(sensor,oi);

<span class="comment">% We can view sensor image in the GUI.  Note that the image that comes up</span>
<span class="comment">% shows the color of each pixel in the sensor mosaic. Also, please be aware</span>
<span class="comment">% that the Matlab rendering algorithm often introduces unwanted artifacts</span>
<span class="comment">% into the display window.  You can resize the window to eliminate these.</span>
<span class="comment">% You can also set the display gamma function to brighten the appearance in</span>
<span class="comment">% the edit box at the lower left of the window.</span>
vcAddObject(sensor); sensorImageWindow;

<span class="comment">% There are a variety of ways to quantify these data in the pulldown menus.</span>
<span class="comment">% Also, you can view the individual pixel data either by zooming on the</span>
<span class="comment">% image (Edit | Zoom) or by bringing the image viewer tool (Edit | Viewer).</span>
<span class="comment">%</span>
<span class="comment">% Type 'help iexL2ColorFilter' to find out how to convert data from an</span>
<span class="comment">% Excel Spread Sheet to an ISET color filter file or a spectral file/</span>
<span class="comment">%</span>
<span class="comment">% ISET includes a wide array of options for selecting color filters,</span>
<span class="comment">% fill-factors, infrared blocking filters, adjusting pixel properties,</span>
<span class="comment">% color filter array patterns, and exposure modes.</span>
</pre><img vspace="5" hspace="5" src="t_introduction_07.png" alt=""> <h2>END<a name="9"></a></h2><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% t_introduction.m
%
% This script is a brief introduction to key ideas and methods used in
% ISETBIO. 
%
% To browse through scripts and tutorials use the tab-completion function.
% For example,
%    Use t_"TAB KEY" to see the list of tutorials
%
%    Use s_"TAB KEY" to see the list of ISET scripts
%    Use s_scene"TAB KEY" to see the scripts related to scenes
%      and so forth
%
% See also: t_sceneIntroduction.m and t_oiIntroduction.m
%
% To learn more about the processing for a particular function, type help
% or doc followed by the function name, as in "help sensorCreate" or use
% "doc sceneCreate"
%
% Copyright ImagEval Consultants, LLC, 2010.

%% Initialize ISET 
ieInit

%% Initialize some parameters

% In this example, wavelengths range between 400 and 710 nm, sampled every
% 5 nm. It is also possible to expand the range to include wavelengths in
% the near infrared (NIR) range. Of course, this would only make sense if your
% imaging sensor has sensitivity in the NIR range. 
wave = 400:5:710; 

%% Scene
% Create a radiometric description of the scene.
% There are several ways to create a scene. 
% see scripts/scenes for more information about scenes
%
% One is to use the sceneCreate function.  
% In the example below, we create a scene of the Macbeth Color Checker
% illuminated with a tungsten light
% For a complete list of the types of synthetic scenes type "help sceneCreate"
%
% A second method for creating a scene is to read data from a file.  
% ISET includes a few multispectral scenes as part of the distribution.
% These can be found in the data/image/multispectral directory
% You can also select the file (or many other files) using the command:
%    fullFileName = vcSelectImage;
%
% See also: s_sceneFromMultispectral.m, s_sceneFromRGB.m

patchSize = 64;
scene = sceneCreate('macbeth tungsten',patchSize,wave);

% It is often useful to visualize the data in the scene window
vcAddObject(scene); sceneWindow;

%%
% Each scene has a stored illuminant. 
%
scenePlot(scene,'illuminant energy roi');

%%
% It is possible to change the scene illuminant
scene = sceneAdjustIlluminant(scene,'D65.mat');
scene = sceneSet(scene,'name','D65'); % Set the scene name
vcAddObject(scene); sceneWindow;

%%
% Once the scene is loaded, you can adjust different properties
% using the sceneSet command.  Here we adjust the scene mean luminance and
% field of view.
scenePlot(scene,'illuminant energy roi');
scene = sceneAdjustLuminance(scene,200);  % Candelas/m2
scene = sceneSet(scene,'fov',26.5);       % Set the scene horizontal field of view
scene = sceneInterpolateW(scene,wave,1);  % Resample, preserve luminance
% vcAddObject(scene); sceneWindow; % if you want to view the change in the GUI window

%% Optics
% see t_oiIntroduction.m
%
% The next step in the system simulation is to specify the optical image
% formation process.  The optical image is an important structure, like the
% scene structure.  We adjust the properties of optical image formation
% using the oiSet and oiGet routines.
%
% ISET has several optics models that you can experiment with. These
% include shift-invariant optics, in which there is a different
% shift-invariant pointspread function for each wavelength, and a ray-trace
% method, in which we read in data from Zemax and create a shift-variant
% set of pointspread functions along with a geometric distortion function.
%
% The simplest is method of creating an optical image is to use 
% the diffraction-limited lens model.  To create a diffraction-limited
% optics with an f# of 4, you can call these functions
oi = oiCreate;
optics = oiGet(oi,'optics');           
optics = opticsSet(optics,'fnumber',4);

% In this example we set the properties of the optics to include cos4th
% falloff for the off axis vignetting of the imaging lens, and we set the
% lens focal length to 3 mm. 
optics = opticsSet(optics,'offaxis','cos4th');
optics = opticsSet(optics,'focal length',3e-3);     % from lens calibration software

% Many other properties can be set as well (type help opticsSet or doc
% opticsSet).

% We then replace the new optics variable into the optical image structure.
oi = oiSet(oi,'optics',optics);

% We use the scene structure and the optical image structure to update the
% irradiance.
oi = oiCompute(scene,oi);

% We save the optical image structure and bring up the optical image
% window.
vcAddObject(oi); oiWindow;

% From the window you can see a wide range of options. These include
% insertion of a birefringent anti-aliasing filter, turning off cos4th
% image fall-off, adjusting the lens properties, and so forth.
%
% You can read more about the optics models by typing "doc opticsGet".
% You can see an online video about using the ray trace software at:
%   http://www.imageval.com/public/Products/ISET/ApplicationNotes/ZemaxTutorial.htm
 
%% Sensor
% The irradiance is then captured by a simulated sensor, resulting
% in an array of output voltages.
% There are a very large number of sensor parameters. Here we illustrate
% the process of creating a simple Bayer-gbrg sensor and setting a few of
% its basic properties.
%
% To create the sensor structure, we call
sensor = sensorCreate('bayer (gbrg)');

% We set the sensor properties using sensorSet and sensorGet routines.
%
% Just as the optical irradiance gives a special status to the optics, the
% sensor gives a special status to the pixel.  In this section we define
% the key pixel and sensor properties, and we then put the sensor and pixel
% back together.

% To get the pixel structure from the sensor we use:
pixel =  sensorGet(sensor,'pixel');

% Here are some of the key pixel properties
voltageSwing   = 1.15;  % Volts
wellCapacity   = 9000;  % Electrons
conversiongain = voltageSwing/wellCapacity;   
fillfactor     = 0.45;       % A fraction of the pixel area
pixelSize      = 2.2*1e-6;   % Meters
darkvoltage    = 1e-005;     % Volts/sec
readnoise      = 0.00096;    % Volts

% We set these properties here
pixel = pixelSet(pixel,'size same fill factor',[pixelSize pixelSize]);   
pixel = pixelSet(pixel,'conversion gain', conversiongain);        
pixel = pixelSet(pixel,'voltage swing',voltageSwing);                                             
pixel = pixelSet(pixel,'dark voltage',darkvoltage) ;               
pixel = pixelSet(pixel,'read noise volts',readnoise);  

%  Now we set some general sensor properties
% exposureDuration = 0.030; % commented because we set autoexposure
dsnu =  0.0010;           % Volts (dark signal non-uniformity)
prnu = 0.2218;            % Percent (ranging between 0 and 100) photodetector response non-uniformity
analogGain   = 1;         % Used to adjust ISO speed
analogOffset = 0;         % Used to account for sensor black level
rows = 466;               % number of pixels in a row
cols = 642;               % number of pixels in a column

% Set these sensor properties
% sensor = sensorSet(sensor,'exposuretime',exposureDuration); % commented because we set autoexposure
sensorSet(sensor,'autoExposure',1);  
sensor = sensorSet(sensor,'rows',rows);
sensor = sensorSet(sensor,'cols',cols);
sensor = sensorSet(sensor,'dsnu level',dsnu);  
sensor = sensorSet(sensor,'prnu level',prnu); 
sensor = sensorSet(sensor,'analog Gain',analogGain);     
sensor = sensorSet(sensor,'analog Offset',analogOffset);   

% Stuff the pixel back into the sensor structure
sensor = sensorSet(sensor,'pixel',pixel);
sensor = pixelCenterFillPD(sensor,fillfactor);

% It is also possible to replace the spectral quantum efficiency curves of
% the sensor with those from a calibrated camera.  We include the
% calibration data from a very nice Nikon D100 camera as part of ISET.
% To load those data we first determine the wavelength samples for this sensor.
wave = sensorGet(sensor,'wave');

% Then we load the calibration data and attach them to the sensor structure
fullFileName = fullfile(isetRootPath,'data','sensor','colorfilters','NikonD100.mat');
[data,filterNames] = ieReadColorFilter(wave,fullFileName); 
sensor = sensorSet(sensor,'filter spectra',data);
sensor = sensorSet(sensor,'filter names',filterNames);
sensor = sensorSet(sensor,'Name','Camera-Simulation');

% We are now ready to compute the sensor image
sensor = sensorCompute(sensor,oi);

% We can view sensor image in the GUI.  Note that the image that comes up
% shows the color of each pixel in the sensor mosaic. Also, please be aware
% that the Matlab rendering algorithm often introduces unwanted artifacts
% into the display window.  You can resize the window to eliminate these.
% You can also set the display gamma function to brighten the appearance in
% the edit box at the lower left of the window.
vcAddObject(sensor); sensorImageWindow;

% There are a variety of ways to quantify these data in the pulldown menus.
% Also, you can view the individual pixel data either by zooming on the
% image (Edit | Zoom) or by bringing the image viewer tool (Edit | Viewer).
%
% Type 'help iexL2ColorFilter' to find out how to convert data from an
% Excel Spread Sheet to an ISET color filter file or a spectral file/
%
% ISET includes a wide array of options for selecting color filters,
% fill-factors, infrared blocking filters, adjusting pixel properties,
% color filter array patterns, and exposure modes. 

%% END




##### SOURCE END #####
--></body></html>