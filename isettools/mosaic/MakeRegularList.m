function [list] = MakeRegularList(nrecreq,ndim)% [list] = MakeRegularList(nrecreq,ndim)%% Make a regular rectangular mosaic.%   nrecreq is the desired number of receptors.%   ndim are the image dimensions.%   list is a list of the row,col positions of the receptors.%% 7/10/94		dhb		Changed name from MakeRegularMosaic.% Compute number of receptors.% Since we require a grid, we can't guarantee% requested number.nxrec = floor(sqrt(nrecreq));nyrec = floor( nrecreq/nxrec );nrec = nxrec*nyrec;xspace = floor(ndim/nxrec);yspace = floor(ndim/nyrec);% Generate lists of x and y receptor positionsinitialx = 1+xspace/2;initialy = 1+yspace/2;xlocs = linspace(1+xspace/2,ndim-xspace/2,nxrec);ylocs = linspace(1+xspace/2,ndim-xspace/2,nyrec);% Put together a list of all combinations% This is unreadable but much faster than loopsexpandx = ones(length(ylocs),1);expandy = ones(length(xlocs),1);xlist = reshape((expandx*xlocs),nrec,1);ylist = reshape((expandy*ylocs)',nrec,1);list = [xlist , ylist];